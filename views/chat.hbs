<form action="/logout" method="POST">
    <button type="submit" class="rounded-3 border-0">Logout</button>
</form>

<div class="d-flex flex-row justify-content-center align-content-center">
    <div class="box-chat d-flex flex-column gap-4 justify-content-end mt-5 p-3 rounded-4">
        <div id="frame">
            <div>{{> conversation}}</div>
        </div>
        <div class="d-flex flex-row justify-content-center">
            <form action="/chat" method="POST" id="chat-form">
                <label for="message">
                </label>
                <input type="text" id="message" name="message" class="rounded-3 border-0" style="width: 500px; max-height: 50px;">
                <button type="submit" class="rounded-3 border-0">Submit</button>
            </form>
        </div>
    </div>
</div>
<script> //https://jsfiddle.net/9bazc6hx/3/ TODO: scroll direct bottom
    const scrollToBottom = (id) => {
        const element = document.getElementById(id);
        element.scrollTop = element.scrollHeight;
    }
    
    $(window).on("load", function() {
        scrollToBottom("frame");
    });

    const chatForm = document.getElementById('chat-form');
    const messagesUl = document.getElementById('messages-ul');

    chatForm.addEventListener('submit', (event) => {
        const newDiv = document.createElement('div');
        newDiv.classList.add('d-flex', 'flex-row', 'justify-content-end');
        const inputValue = document.getElementById('message').value;
        const newLi = document.createElement('li');
        newLi.textContent = "Patient: " + inputValue;
        newLi.setAttribute('style', 'max-width: 400px;');
        newLi.classList.add('patient', 'bg-primary', 'bg-gradient', 'rounded-2', 'm-2', 'p-2');
        newDiv.appendChild(newLi);
        messagesUl.appendChild(newDiv);
        scrollToBottom("frame");
        setTimeout(() => {
            document.getElementById('message').value = '';
        }, 10);
    });

</script>